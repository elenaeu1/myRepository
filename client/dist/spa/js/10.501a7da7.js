(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"6f8c":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{attrs:{padding:""}},[r("div",{staticClass:"row justify-evenly",staticStyle:{"margin-bottom":"60px"}},[r("q-input",{attrs:{filled:"",type:"date",hint:"Data inceput"},model:{value:t.filter.startDate,callback:function(e){t.$set(t.filter,"startDate",e)},expression:"filter.startDate"}}),r("q-input",{attrs:{filled:"",type:"date",hint:"Data final"},model:{value:t.filter.endDate,callback:function(e){t.$set(t.filter,"endDate",e)},expression:"filter.endDate"}}),r("q-select",{staticStyle:{width:"250px"},attrs:{filled:"",label:"Toti furnizorii",hint:"Furnizori","use-input":"","use-chips":"",multiple:"","input-debounce":"0",options:t.filterOptions},on:{filter:t.filterFn},model:{value:t.filter.suppliers,callback:function(e){t.$set(t.filter,"suppliers",e)},expression:"filter.suppliers"}})],1),r("q-table",{attrs:{title:"Plati",data:t.payments,filter:t.filter.search,columns:t.columns,"row-key":"name"},scopedSlots:t._u([{key:"top-left",fn:function(){return[r("div",{staticClass:"q-table__title"},[t._v("Plati")]),r("div",[t._v("Total: "+t._s(t.generateTotal()))])]},proxy:!0},{key:"top-right",fn:function(){return[r("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:t._u([{key:"append",fn:function(){return[r("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter.search,callback:function(e){t.$set(t.filter,"search",e)},expression:"filter.search"}})]},proxy:!0}])})],1)},i=[],a=(r("ac6a"),r("cadf"),r("06db"),r("456d"),r("28a5"),r("6762"),r("2fdb"),r("7f7f"),r("18d6"),{name:"Payments",computed:{suppliersStringOptions:function(){return this.suppliers.map((function(t){return{label:t.name,id:t.id}}))},suppliers:function(){return this.$store.getters["data/getSuppliers"]},payments:function(){var t=this.$store.getters["data/getPayments"];if(this.filter.startDate||this.filter.endDate){var e=this.filter.startDate?new Date(this.filter.startDate):null,r=this.filter.endDate?new Date(this.filter.endDate):null;t=e?t.filter((function(t){return new Date(t.createdAt)>e})):t,t=r?t.filter((function(t){return new Date(t.createdAt)<r})):t}if(this.filter.suppliers.length>0){var n=this.filter.suppliers.map((function(t){return t.id}));t=t.filter((function(t){return n.includes(t.invoice.supplierId)}))}return this.$store.dispatch("data/setFilter",this.filter.suppliers),this.filteredInvoices=t,t},categories:function(){return this.$store.getters["data/getCategories"]},storeFilter:function(){return this.$store.getters["data/getFilter"]},invoices:function(){var t=this.$store.getters["data/getInvoices"];if(this.filter.startDate||this.filter.endDate){var e=this.filter.startDate?new Date(this.filter.startDate):null,r=this.filter.endDate?new Date(this.filter.endDate):null;"dueDate"==this.filter.typeDate?(t=e?t.filter((function(t){return new Date(t.dueDate)>e})):t,t=r?t.filter((function(t){return new Date(t.dueDate)<r})):t):(t=e?t.filter((function(t){return new Date(t.issueDate)>e})):t,t=r?t.filter((function(t){return new Date(t.issueDate)<r})):t)}if(this.filter.suppliers.length>0){var n=this.filter.suppliers.map((function(t){return t.id}));t=t.filter((function(t){return n.includes(t.supplierId)}))}return this.$store.dispatch("data/setFilter",this.filter.suppliers),this.filteredInvoices=t,t}},methods:{formatDate:function(t){var e=new Date(t);return e.toLocaleString("en-GB").split(",")[0]},filterFn:function(t,e){var r=this;e((function(){if(""===t)r.filterOptions=r.suppliersStringOptions;else{var e=t.toLowerCase();r.filterOptions=r.suppliersStringOptions.filter((function(t){return t.label.toLowerCase().indexOf(e)>-1}))}}))},generateTotal:function(){var t={};this.payments.forEach((function(e){t[e.invoice.currency]?t[e.invoice.currency]+=e.value:t[e.invoice.currency]=e.value})),console.log(t);var e="";return Object.keys(t).forEach((function(r){return e+="".concat(t[r]," ").concat(r,"; ")})),e.slice(0,-2)}},beforeMount:function(){this.filter.suppliers=this.storeFilter},data:function(){var t=this;return{filterOptions:this.suppliersStringOptions,countTotal:"",filter:{search:"",startDate:"",endDate:"",suppliers:[]},columns:[{name:"number",required:!0,label:"Numar",align:"left",field:function(t){return t.number},format:function(t){return"".concat(t)},sortable:!0},{name:"supplier",required:!0,label:"Furnizor",align:"left",field:function(t){return t.invoice.supplier.name},format:function(t){return"".concat(t)},sortable:!0},{name:"invoiceNumber",label:"Numar factura",align:"left",field:function(t){return t.invoice.number},format:function(t){return t},sortable:!0},{name:"paidDate",required:!0,label:"Data plata",align:"left",field:function(t){return t.createdAt},format:function(e){return t.formatDate(e)},sortable:!0},{name:"value",required:!0,label:"Valoare cu TVA",align:"left",field:function(t){return t.value},format:function(t){return"".concat(t)},sortable:!0},{name:"currency",required:!0,label:"Valuta",align:"left",field:function(t){return t.invoice.currency},format:function(t){return"".concat(t)},sortable:!0},{name:"iban",label:"IBAN",align:"left",field:function(t){return t.bankAccount.iban},format:function(t){return t},sortable:!0}]}}}),l=a,s=r("2877"),u=r("eebe"),o=r.n(u),f=r("9989"),c=r("27f9"),p=r("ddd8"),d=r("eaac"),h=r("0016"),m=Object(s["a"])(l,n,i,!1,null,null,null);e["default"]=m.exports;o()(m,"components",{QPage:f["a"],QInput:c["a"],QSelect:p["a"],QTable:d["a"],QIcon:h["a"]})}}]);