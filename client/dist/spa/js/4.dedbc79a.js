(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{2549:function(t,a,e){"use strict";var n=e("f846"),s=e.n(n);s.a},"78a7":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"q-pa-md"},[t.emptyShow?e("q-banner",{staticClass:"text-white bg-green",attrs:{"inline-actions":""},scopedSlots:t._u([{key:"action",fn:function(){return[e("q-btn",{attrs:{flat:"",icon:"insert_emoticon",to:"/invoices",label:"Facturi"}}),e("q-btn",{attrs:{flat:"",icon:"close"},on:{click:function(a){t.emptyShow=!t.emptyShow}}})]},proxy:!0}],null,!1,2796457499)},[t._v("\n    Aveti toate facturile achitate!\n    ")]):t._e(),t.delayedShow?e("q-banner",{staticClass:"text-white bg-red",attrs:{"inline-actions":""},scopedSlots:t._u([{key:"action",fn:function(){return[e("q-btn",{attrs:{flat:"",icon:"exit_to_app",to:"/invoices",label:"Facturi"}}),e("q-btn",{attrs:{flat:"",icon:"close"},on:{click:function(a){t.delayedShow=!t.delayedShow}}})]},proxy:!0}],null,!1,2050531089)},[t._v("\n    Aveti "+t._s(t.delayed)+" facturi cu scadenta intarziata!\n    ")]):t._e(),t.lastDayShow?e("q-banner",{staticClass:"text-white bg-orange",attrs:{"inline-actions":""},scopedSlots:t._u([{key:"action",fn:function(){return[e("q-btn",{attrs:{flat:"",icon:"exit_to_app",to:"/invoices",label:"Facturi"}}),e("q-btn",{attrs:{flat:"",icon:"close"},on:{click:function(a){t.lastDayShow=!t.lastDayShow}}})]},proxy:!0}],null,!1,246925841)},[t._v("\n    Aveti "+t._s(t.lastDay)+" facturi cu scadenta astazi!\n    ")]):t._e(),t.lastWeekShow?e("q-banner",{staticClass:"bg-yellow-7 text-white",attrs:{"inline-actions":"",rounded:""},scopedSlots:t._u([{key:"action",fn:function(){return[e("q-btn",{attrs:{flat:"",icon:"exit_to_app",to:"/invoices",label:"Facturi"}}),e("q-btn",{attrs:{flat:"",icon:"close"},on:{click:function(a){t.lastWeekShow=!t.lastWeekShow}}})]},proxy:!0}],null,!1,9405809)},[t._v("\n    Aveti "+t._s(t.lastWeek)+" facturi cu scadenta saptamana aceasta!\n    ")]):t._e(),e("div",{staticClass:"q-pa-md row items-start q-gutter-md"},t._l(t.invoices,(function(a){return e("q-card",{key:a.id,staticClass:"my-card",attrs:{flat:"",bordered:""}},[e("q-card-section",[e("div",{staticClass:"text-h6"},[t._v(t._s(a.supplier.name)+"/"+t._s(a.number))])]),e("q-separator",{attrs:{inset:""}}),e("q-card-section",[e("div",{staticClass:"col-3 text-grey"},[t._v("Data scadenta:")]),e("div",{staticClass:"col-9 text-dark"},[t._v(t._s(t.formatDate(a.dueDate)))])]),e("q-card-section",[e("div",{staticClass:"col-3 text-grey"},[t._v("Suma achitata: / Total plata:")]),e("div",{staticClass:"col-9 text-dark"},[t._v("\n          "+t._s(a.paid)+" "+t._s(a.currency)+" / "+t._s(a.value)+"\n          "+t._s(a.currency)+"\n        ")])])],1)})),1),t.isAdmin?e("div",{staticClass:"echarts",staticStyle:{"margin-top":"20px"}},[e("IEcharts",{attrs:{option:t.supplierData}})],1):e("div",{staticClass:"q-pa-md"},[e("q-table",{attrs:{title:"Status general",data:t.allInvoices,columns:t.columns,"row-key":"supplier"},scopedSlots:t._u([{key:"body-cell-ok",fn:function(t){return[e("q-td",{attrs:{props:t}},[e("q-banner",{class:0===t.row.value?"bg-green":"bg-orange",attrs:{"inline-actions":"",rounded:""}})],1)]}}])},[t._v("\n      >")])],1)],1)},s=[],i=(e("7514"),e("ac6a"),e("cadf"),e("06db"),e("456d"),e("7f7f"),e("28a5"),e("ce44")),o=e("18d6"),r={name:"HomePage",methods:{formatDate:function(t){var a=new Date(t);return a.toLocaleString("en-GB").split(",")[0]},refresh:function(){this.$store.dispatch("data/loadUsers")}},components:{IEcharts:i["a"]},computed:{invoices:function(){return this.$store.getters["data/getInvoices"].filter((function(t){return t.sold>0}))},allInvoices:function(){var t=this.$store.getters["data/getInvoices"],a={};t.forEach((function(t){a[t.supplier.name]?a[t.supplier.name]+=t.sold:a[t.supplier.name]=t.sold}));var e=[];return Object.keys(a).forEach((function(t,n){e.push({supplier:t,value:a[t]})})),e},suppliers:function(){return this.$store.getters["data/getSuppliers"]},users:function(){},supplierData:function(){var t=this,a={},e=this.$store.getters["data/getUsers"];e&&e.forEach((function(t){t.invoices.forEach((function(t){a[t.supplierId]?(a[t.supplierId].total+=t.value,a[t.supplierId].paid+=t.paid):a[t.supplierId]={total:t.value,paid:t.paid}}))}));var n=Object.keys(a).map((function(e){var n=t.suppliers.find((function(t){return t.id==e}));return{total:a[e].total,paid:a[e].paid,name:n.name}}));return{title:{text:"Valoare facturi per furnizor [RON]"},tooltip:{},xAxis:{data:n.map((function(t){return t.name}))},yAxis:{},series:[{name:"Valoare platita",type:"bar",data:n.map((function(t){return t.paid}))},{name:"Valoarea totala",type:"bar",data:n.map((function(t){return t.total}))}]}}},data:function(){return{loading:!0,isAdmin:o["a"].getItem("user").isAdmin,lastDay:0,lastDayShow:!1,lastWeek:0,lastWeekShow:!1,delayed:0,delayedShow:!1,emptyShow:!1,columns:[{name:"supplier",required:!0,label:"Furnizor",align:"left",field:function(t){return t.supplier},format:function(t){return"".concat(t)},sortable:!0},{name:"value",align:"left",label:"Suma ramasa",field:function(t){return t.value},format:function(t){return"".concat(t," RON")},sortable:!0},{name:"ok",align:"left",label:"Status"}]}},beforeMount:function(){var t=this;this.$store.dispatch("data/loadUsers");var a=new Date;0===this.invoices.length&&(this.emptyShow=!0),this.invoices.forEach((function(e){var n=new Date(e.dueDate);n<a.getDate()+1?t.delayed++:n.getDate()+1<a.getDate()+2?t.lastDay++:n.getDate()+1<a.getDate()+8&&t.lastWeek++,t.delayed&&(t.delayedShow=!0),t.lastDay&&(t.lastDayShow=!0),t.lastWeek&&(t.lastWeekShow=!0)}))},mounted:function(){}},l=r,c=(e("2549"),e("2877")),u=e("eebe"),d=e.n(u),p=e("9989"),f=e("54e1"),h=e("9c40"),v=e("f09f"),m=e("a370"),y=e("eb85"),b=e("eaac"),_=e("db86"),g=Object(c["a"])(l,n,s,!1,null,"39b47958",null);a["default"]=g.exports;d()(g,"components",{QPage:p["a"],QBanner:f["a"],QBtn:h["a"],QCard:v["a"],QCardSection:m["a"],QSeparator:y["a"],QTable:b["a"],QTd:_["a"]})},f846:function(t,a,e){}}]);