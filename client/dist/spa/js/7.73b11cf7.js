(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"644f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{attrs:{padding:""}},[a("div",{staticClass:"row full-width"},[a("p",[e._v("Pagina furnizori")]),a("q-btn",{staticStyle:{position:"absolute",right:"32px"},attrs:{label:"Verifica categorii"},on:{click:function(t){e.cardCategories=!e.cardCategories}}})],1),a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{title:"Furnizori",data:e.suppliers,filter:e.filter,columns:e.columns,"row-key":"name"},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-actions",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-btn",{staticClass:"button",staticStyle:{"margin-right":"20px"},attrs:{outline:"",round:"",color:"primary",icon:"subject"},on:{click:function(a){return e.viewSupplier(t.row)}}}),e.isAdmin?a("q-btn",{staticClass:"button",attrs:{outline:"",round:"",color:"negative",icon:"delete"},on:{click:function(a){return e.removeSupplier(t.row)}}}):e._e()],1)]}},{key:"top-left",fn:function(){return[a("q-btn",{attrs:{color:"primary",label:"Adauga furnizor",outline:""},on:{click:e.addSupplier}}),a("q-space")]},proxy:!0}])}),a("q-dialog",{model:{value:e.card,callback:function(t){e.card=t},expression:"card"}},[a("q-card",{staticClass:"my-card"},["VIEW"===e.state?a("q-card-section",{staticClass:"row text-h5 ellipsis"},[a("div",{staticClass:"col-10 text-dark"},[e._v(e._s(e.selectedSupplier.name))]),a("div",{staticClass:"col-2",attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",round:"",outline:"",icon:"create"},on:{click:e.editSupplier}})],1)]):a("q-card-section",{staticClass:"row text-h5 ellipsis"},[a("div",{staticClass:"col-10 text-dark"},[a("q-input",{attrs:{outlined:"",label:"Nume"},model:{value:e.selectedSupplier.name,callback:function(t){e.$set(e.selectedSupplier,"name",t)},expression:"selectedSupplier.name"}})],1)]),a("q-card-section",[e.selectedSupplier.category?a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Categorie:")]),"VIEW"===e.state?a("div",{staticClass:"col-9 text-dark"},[e._v("\n              "+e._s(e.selectedSupplier.category.label)+"\n            ")]):a("q-select",{staticClass:"col-9",attrs:{outlined:"",dense:"",options:e.selectCategories},model:{value:e.selectedSupplier.category,callback:function(t){e.$set(e.selectedSupplier,"category",t)},expression:"selectedSupplier.category"}})],1):e._e(),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Sediu:")]),"VIEW"===e.state?a("div",{staticClass:"col-9 text-dark"},[e._v("\n              "+e._s(e.selectedSupplier.headquarter)+"\n            ")]):a("q-input",{staticClass:"col-9",attrs:{outlined:"",dense:""},model:{value:e.selectedSupplier.headquarter,callback:function(t){e.$set(e.selectedSupplier,"headquarter",t)},expression:"selectedSupplier.headquarter"}})],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("CUI:")]),"VIEW"===e.state?a("div",{staticClass:"col-9 text-dark"},[e._v("\n              "+e._s(e.selectedSupplier.CUI)+"\n            ")]):a("q-input",{staticClass:"col-9",attrs:{outlined:"",dense:""},model:{value:e.selectedSupplier.CUI,callback:function(t){e.$set(e.selectedSupplier,"CUI",t)},expression:"selectedSupplier.CUI"}})],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("ORC:")]),"VIEW"===e.state?a("div",{staticClass:"col-9 text-dark"},[e._v("\n              "+e._s(e.selectedSupplier.ORC)+"\n            ")]):a("q-input",{staticClass:"col-9",attrs:{outlined:"",dense:""},model:{value:e.selectedSupplier.ORC,callback:function(t){e.$set(e.selectedSupplier,"ORC",t)},expression:"selectedSupplier.ORC"}})],1),"VIEW"===e.state?a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Conturi bancare:")]),a("q-list",{staticClass:"col-9 rounded-borders",attrs:{dense:"",bordered:"",padding:""}},[e._l(e.selectedSupplier.bankAccounts,(function(t){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.id,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"account_balance"}})],1),a("q-item-section",[e._v(e._s(t.iban))])],1)})),"EDIT"==e.state?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-primary",attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"add"}})],1),a("q-item-section",[e._v("Adauga un cont nou")])],1):e._e(),"VIEW"==e.state&&e.selectedSupplier&&e.selectedSupplier.bankAccounts&&0==e.selectedSupplier.bankAccounts.length?a("q-item",[e._v("Nici un cont bancar asociat.")]):e._e()],2)],1):e._e(),"EDIT"===e.state?a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Conturi bancare:")]),a("q-list",{staticClass:"col-9 rounded-borders",attrs:{dense:"",bordered:"",padding:""}},[e._l(e.selectedBankAccounts,(function(t,i){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.id,attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"account_balance"}})],1),"NOTHING"==t.operation?a("q-item-section",{on:{click:function(e){t.operation="DELETE"}}},[e._v(e._s(t.iban))]):e._e(),"ADD"==t.operation?a("q-item-section",[a("q-input",{on:{change:function(a){!t.iban&&e.selectedBankAccounts.splice(1,i)}},model:{value:t.iban,callback:function(a){e.$set(t,"iban",a)},expression:"item.iban"}})],1):e._e(),"DELETE"==t.operation?a("q-item-section",{staticClass:"text-strike",on:{click:function(e){t.operation="NOTHING"}}},[e._v(e._s(t.iban))]):e._e()],1)})),"EDIT"==e.state?a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"text-primary",attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{name:"add"}})],1),a("q-item-section",{on:{click:function(t){return e.selectedBankAccounts.push({iban:"Introduce un IBAN",operation:"ADD"})}}},[e._v("Adauga un cont nou")])],1):e._e()],2)],1):e._e(),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 row text-grey"},[e._v("Date de contact:")]),a("div",{staticClass:"col-9 row text-dark contact"},["VIEW"===e.state?a("div",{staticClass:"col"},[a("span",{staticClass:"text-grey"},[e._v("Nr. mobil:")]),a("span",{staticClass:"text-grey"},[e._v("Email:")]),a("span",{staticClass:"text-grey"},[e._v("Fax:")])]):a("div",{staticClass:"col"},[a("span",{staticClass:"text-grey",staticStyle:{"line-height":"40px"}},[e._v("Nr. mobil:")]),a("span",{staticClass:"text-grey",staticStyle:{"line-height":"40px"}},[e._v("Email:")]),a("span",{staticClass:"text-grey",staticStyle:{"line-height":"40px"}},[e._v("Fax:")])]),"VIEW"===e.state?a("div",{staticClass:"col"},[a("span",{staticClass:"text-dark"},[e._v(e._s(e.selectedSupplier.phone))]),a("span",{staticClass:"text-dark"},[e._v(e._s(e.selectedSupplier.email))]),a("span",{staticClass:"text-dark"},[e._v(e._s(e.selectedSupplier.fax))])]):a("div",{staticClass:"col"},[a("q-input",{attrs:{outlined:"",type:"phone",dense:""},model:{value:e.selectedSupplier.phone,callback:function(t){e.$set(e.selectedSupplier,"phone",t)},expression:"selectedSupplier.phone"}}),a("q-input",{attrs:{outlined:"",type:"email",dense:""},model:{value:e.selectedSupplier.email,callback:function(t){e.$set(e.selectedSupplier,"email",t)},expression:"selectedSupplier.email"}}),a("q-input",{attrs:{outlined:"",dense:""},model:{value:e.selectedSupplier.fax,callback:function(t){e.$set(e.selectedSupplier,"fax",t)},expression:"selectedSupplier.fax"}})],1)])])]),"VIEW"===e.state?a("q-card-actions",{attrs:{align:"around"}},[a("q-btn",{attrs:{outline:"",color:"primary "},on:{click:e.goInvoices}},[e._v("Facturi")]),a("q-btn",{attrs:{outline:"",color:"primary"},on:{click:e.goPayments}},[e._v("Plati")])],1):"EDIT"===e.state?a("q-card-actions",{attrs:{align:"around"}},[a("q-btn",{attrs:{outline:"",color:"primary"},on:{click:function(t){e.card=!1}}},[e._v("Anuleaza")]),a("q-btn",{attrs:{outline:"",color:"primary"},on:{click:e.executeSaveSupplier}},[e._v("Modifica")])],1):a("q-card-actions",{attrs:{align:"around"}},[a("q-btn",{attrs:{outline:"",color:"primary"},on:{click:e.executeAddSupplier}},[e._v("Adauga")])],1)],1)],1),a("q-dialog",{model:{value:e.cardCategories,callback:function(t){e.cardCategories=t},expression:"cardCategories"}},[a("q-table",{attrs:{title:"Categorii",data:e.categories,columns:e.isAdmin?e.columnsCategoriesAdmin:e.columnsCategories,"row-key":"name"},scopedSlots:e._u([{key:"body-cell-delete",fn:function(t){return[a("q-td",{attrs:{props:t}},[e.isAdmin?a("q-btn",{staticClass:"button",attrs:{outline:"",round:"",color:"negative",icon:"delete"},on:{click:function(a){return e.removeCategory(t.row)}}}):e._e()],1)]}},e.isAdmin?{key:"top",fn:function(){return[a("q-input",{staticClass:"full-width",attrs:{outline:"","bottom-slots":"",label:"Categorie noua",dense:""},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"add"},on:{click:e.executeAddCategory}})]},proxy:!0}],null,!1,3807354141),model:{value:e.newCategory,callback:function(t){e.newCategory=t},expression:"newCategory"}}),a("q-space")]},proxy:!0}:null],null,!0)})],1)],1)])},s=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("9523")),n=a.n(r),o=(a("7f7f"),a("18d6"));function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"Suppliers",methods:{goPayments:function(){this.$store.dispatch("data/setFilter",[{id:this.selectedSupplier.id,label:this.selectedSupplier.name}]),this.$router.push({name:"Payments"})},goInvoices:function(){this.$store.dispatch("data/setFilter",[{id:this.selectedSupplier.id,label:this.selectedSupplier.name}]),this.$router.push({name:"Invoices"})},executeAddCategory:function(){var e=this;this.newCategory.length<2?this.$q.notify({color:"negative",message:"Categorie invalida",icon:"arrow_forward"}):this.$axios.post("/api/suppliers/categories",{name:this.newCategory}).then((function(t){e.$q.notify({color:"green",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadCategories")})).catch((function(t){e.$q.notify({color:"negative",message:"Eroare",icon:"arrow_forward"})}))},executeSaveSupplier:function(){var e=this,t=this.selectedSupplier,a=t.headquarter,i=t.name,s=t.CUI,r=t.ORC,n=t.phone,o=t.email,c=t.fax,d=(t.categoryId,t.bankAccounts,t.category);a&&i&&s&&r&&n&&o&&c&&d.value?this.$axios.put("/api/suppliers",l(l({},this.selectedSupplier),{},{categoryId:this.selectedSupplier.category.value,bankAccounts:this.selectedBankAccounts})).then((function(t){e.$q.notify({color:"green",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadSuppliers"),e.card=!1})).catch((function(t){e.$q.notify({color:"negative",message:"Eroare",icon:"arrow_forward"})})):this.$q.notify({color:"negative",message:"date invalide ",icon:"arrow_forward"})},executeAddSupplier:function(){var e=this,t=this.selectedSupplier,a=t.headquarter,i=t.name,s=t.CUI,r=t.ORC,n=t.phone,o=t.email,c=t.fax,d=(t.categoryId,t.bankAccounts,t.category);a&&i&&s&&r&&n&&o&&c&&d.value?this.$axios.post("/api/suppliers",l(l({},this.selectedSupplier),{},{categoryId:this.selectedSupplier.category.value})).then((function(t){e.$q.notify({color:"green",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadSuppliers"),e.card=!1})).catch((function(t){e.$q.notify({color:"negative",message:"Eroare",icon:"arrow_forward"})})):this.$q.notify({color:"negative",message:"date invalide ",icon:"arrow_forward"})},viewSupplier:function(e){this.state="VIEW",this.card=!0,this.selectedSupplier=l(l({},e),{},{category:{value:e.category.id,label:e.category.name}}),console.log(this.selectedSupplier)},addSupplier:function(){this.state="ADD",this.card=!0,this.selectedSupplier={headquarter:"",name:"",CUI:"",ORC:"",phone:"",email:"",fax:"",categoryId:null,bankAccounts:[],category:{id:0,label:""}}},editSupplier:function(){this.state="EDIT",this.selectedBankAccounts=this.selectedSupplier.bankAccounts.map((function(e){return l(l({},e),{},{operation:"NOTHING"})}))},removeCategory:function(e){var t=this;console.log(e),this.$q.dialog({title:"Confirmare",message:"Vrei sa stergi categoria ".concat(e.name,"?"),cancel:!0,persistent:!0}).onOk((function(){t.$axios.delete("/api/suppliers/categories",{data:{id:e.id}}).then((function(e){t.$q.notify({color:"green",message:e.data.message,icon:"arrow_forward"}),t.$store.dispatch("data/loadCategories")})).catch((function(e){console.error(e),t.$q.notify({color:"negative",message:e.response.data.message,icon:"arrow_forward"})}))}))},removeSupplier:function(e){var t=this;console.log(e),this.$q.dialog({title:"Confirmare",message:"Vrei sa stergi furnizorul ".concat(e.name,"?"),cancel:!0,persistent:!0}).onOk((function(){t.$axios.delete("/api/suppliers",{data:{id:e.id}}).then((function(e){t.$q.notify({color:"green",message:e.data.message,icon:"arrow_forward"}),t.$store.dispatch("data/loadSuppliers")})).catch((function(e){console.error(e),t.$q.notify({color:"negative",message:e.response.data.message,icon:"arrow_forward"})}))}))}},computed:{selectCategories:function(){return this.categories.map((function(e){return{value:e.id,label:e.name}}))},suppliers:function(){return this.$store.getters["data/getSuppliers"]},categories:function(){return this.$store.getters["data/getCategories"]}},data:function(){return{isAdmin:o["a"].getItem("user").isAdmin,newCategory:"",cardCategories:!1,state:"VIEW",stateBankAccount:"VIEW",selectedBankAccounts:[],filter:"",card:!1,selectedSupplier:{},columns:[{name:"name",required:!0,label:"Nume",align:"left",field:function(e){return e.name},format:function(e){return"".concat(e)},sortable:!0},{name:"category",align:"left",label:"Categorii",field:function(e){return e.category.name},sortable:!0},{name:"actions",label:"Action"}],columnsCategories:[{name:"name",required:!0,label:"Nume",align:"left",field:function(e){return e.name},format:function(e){return"".concat(e)},sortable:!0}],columnsCategoriesAdmin:[{name:"name",required:!0,label:"Nume",align:"left",field:function(e){return e.name},format:function(e){return"".concat(e)},sortable:!0},{name:"delete",label:"Delete",align:"left"}]}}},u=d,p=(a("c817"),a("2877")),m=a("eebe"),f=a.n(m),g=a("9989"),v=a("9c40"),b=a("eaac"),y=a("27f9"),C=a("0016"),h=a("db86"),q=a("2c91"),S=a("24e8"),_=a("f09f"),k=a("a370"),x=a("ddd8"),w=a("1c1c"),I=a("66e5"),$=a("4074"),A=a("4b7e"),E=a("714f"),O=Object(p["a"])(u,i,s,!1,null,"0c165d51",null);t["default"]=O.exports;f()(O,"components",{QPage:g["a"],QBtn:v["a"],QTable:b["a"],QInput:y["a"],QIcon:C["a"],QTd:h["a"],QSpace:q["a"],QDialog:S["a"],QCard:_["a"],QCardSection:k["a"],QSelect:x["a"],QList:w["a"],QItem:I["a"],QItemSection:$["a"],QCardActions:A["a"]}),f()(O,"directives",{Ripple:E["a"]})},"835f":function(e,t,a){},c817:function(e,t,a){"use strict";var i=a("835f"),s=a.n(i);s.a}}]);